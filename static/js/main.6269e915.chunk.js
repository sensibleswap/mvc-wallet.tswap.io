(this["webpackJsonpbsv-web-wallet"]=this["webpackJsonpbsv-web-wallet"]||[]).push([[0],{108:function(e,a,t){"use strict";var c;t.d(a,"a",(function(){return c})),function(e){e.Testnet="testnet",e.Mainnet="mainnet",e.STN="STN"}(c||(c={}))},15:function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"i",(function(){return d})),t.d(a,"j",(function(){return b})),t.d(a,"h",(function(){return f})),t.d(a,"c",(function(){return o})),t.d(a,"f",(function(){return i})),t.d(a,"g",(function(){return u})),t.d(a,"d",(function(){return l})),t.d(a,"e",(function(){return p})),t.d(a,"l",(function(){return h})),t.d(a,"a",(function(){return x})),t.d(a,"k",(function(){return j}));var c=t(47),n=t.n(c),r=t(277);function s(e){for(var a=new n.a(e),t=0;t<(arguments.length<=1?0:arguments.length-1);t++)a=a.div(new n.a(t+1<1||arguments.length<=t+1?void 0:arguments[t+1]));return a.toString()}function d(e){for(var a=new n.a(e),t=0;t<(arguments.length<=1?0:arguments.length-1);t++)a=a.multipliedBy(new n.a(t+1<1||arguments.length<=t+1?void 0:arguments[t+1]));return a.toString()}function b(e){for(var a=new n.a(e),t=0;t<(arguments.length<=1?0:arguments.length-1);t++)a=a.plus(new n.a(t+1<1||arguments.length<=t+1?void 0:arguments[t+1]));return a.toString()}function f(e){for(var a=new n.a(e),t=0;t<(arguments.length<=1?0:arguments.length-1);t++)a=a.minus(new n.a(t+1<1||arguments.length<=t+1?void 0:arguments[t+1]));return a.toString()}function o(e){return new n.a(10).pow(e).toString()}function i(e,a){return new n.a(e).lt(new n.a(a))}function u(e,a){return new n.a(e).lte(new n.a(a))}function l(e,a){return new n.a(e).gt(new n.a(a))}function p(e,a){return new n.a(e).gte(new n.a(a))}function h(e){return new n.a(e).toString()}function x(e,a){a=a||.5;var t=e.toBuffer().length,c=e.getFee()/t;if(c<a){var n="The fee rate should not be less than ".concat(a,", but in the end it is ").concat(c);throw r.b.error(n),new Error(n)}}function j(e){return JSON.parse(JSON.stringify(e,(function(e,a){return"bigint"===typeof a?a.toString():a})))}},264:function(e,a){},33:function(e,a,t){"use strict";(function(e){t.d(a,"b",(function(){return v})),t.d(a,"i",(function(){return m})),t.d(a,"c",(function(){return O})),t.d(a,"f",(function(){return g})),t.d(a,"g",(function(){return w})),t.d(a,"h",(function(){return k})),t.d(a,"k",(function(){return y})),t.d(a,"e",(function(){return T})),t.d(a,"d",(function(){return B})),t.d(a,"a",(function(){return N})),t.d(a,"m",(function(){return H})),t.d(a,"l",(function(){return J})),t.d(a,"j",(function(){return Y}));var c=t(8),n=t(9),r=t(3),s=t(20),d=t(21),b=t(108),f=t(107),o=t.n(f),i=t(129),u=t(15),l=t(68),p=t(398);function h(e){var a=e===b.a.Mainnet?"":"-testnet";return"https://api-mvc".concat(a,".metasv.com")}function x(e){return 200===e.status}function j(e){return new Promise((function(a){return setTimeout(a,e)}))}function v(e,a){return u.b(e,u.c(a))}function m(e,a){try{return new d.mvc.Address(a,e),!0}catch(t){return!1}}function O(a,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.a.Testnet,n=a;n+="|"+t+"|",n+=n.length+"|!@"+7*(7*t.length+a.length);var r=t.match(/[a-z]+/g)?t.match(/[a-z]+/g).length:1,s=t.match(/[A-Z]+/g)?t.match(/[A-Z]+/g).length:1,f=t.match(/[0-9]+/g)?t.match(/[0-9]+/g).length:1;n+=(f+r+s)*t.length+"3571",n+=n+""+n;var o=e.from(n);o=d.mvc.crypto.Hash.sha256(o);for(var i=0;i<=49;i++){var u=e.from(o.toString("hex"));o=d.mvc.crypto.Hash.sha256(u)}var l=d.mvc.crypto.Hash.sha256(e.from(o.toString("hex"))).toString("hex"),p=new d.mvc.PrivateKey(l,c),h=p.toAddress(c).toString();return{address:h,privateKey:p.toString(),publicKey:p.toPublicKey().toString()}}function g(e,a,t,c){var n=e===b.a.Mainnet?"":"/test";return"https://sensiblequery.com".concat(n,"/#/ft/utxo/").concat(c,"/").concat(t,"/").concat(a)}function w(e,a){var t="";return e===b.a.Mainnet&&(t="https://scan.mvc.space/address/"),e===b.a.Testnet&&(t="https://scan.mvc.space/address/"),t?t+=a:t}function k(e,a){var t="";return e===b.a.Mainnet&&(t="https://scan.mvc.space/tx/"),e===b.a.Testnet&&(t="https://scan.mvc.space/tx/"),t?t+=a:t}function y(e){return S.apply(this,arguments)}function S(){return(S=Object(s.a)(Object(n.a)().mark((function a(t){var c,r,s,b,f,o,i,u,l;return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=t.txHex,r=t.scriptHex,s=t.inputIndex,b=t.privateKey,f=t.publicKey,o=t.satoshis,i=new d.mvc.Transaction(c),u=d.mvc.Script.fromBuffer(e.from(r,"hex")),l=Object(d.toHex)(Object(d.signTx)(i,b,u.toASM(),Number(o),s)),a.abrupt("return",{publicKey:f.toString(),sig:l});case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function T(e,a){return I.apply(this,arguments)}function I(){return(I=Object(s.a)(Object(n.a)().mark((function e(a,t){var r,s,d,b;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],s=20,e.prev=2,d=1;case 4:return e.next=6,P(a,t,d,s);case 6:if(b=e.sent,r=[].concat(Object(c.a)(r),Object(c.a)(b)),!(b.length<s)){e.next=10;break}return e.abrupt("break",13);case 10:d++,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.log("getAddressSensibleFtList error"),console.error(e.t0);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function P(e,a,t){return K.apply(this,arguments)}function K(){return K=Object(s.a)(Object(n.a)().mark((function e(a,t,c){var r,s,d=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>3&&void 0!==d[3]?d[3]:20,r=h(a),e.next=4,o.a.get("".concat(r,"/contract/ft/address/").concat(t,"/balance"));case 4:if(s=e.sent,!x(s)){e.next=8;break}return e.abrupt("return",(s.data||[]).map((function(e){return{genesis:e.genesis,codehash:e.codeHash,tokenName:e.name,tokenSymbol:e.symbol,tokenDecimal:e.decimal,balance:u.j(e.confirmedString,e.unconfirmedString)}})));case 8:throw new Error(s.statusText);case 9:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function A(e,a,t){return C.apply(this,arguments)}function C(){return C=Object(s.a)(Object(n.a)().mark((function e(a,t,c){var r,s,d,b=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>3&&void 0!==b[3]?b[3]:16,(c-1)*r,s=h(a),e.next=5,o.a.get("".concat(s,"/address/").concat(t,"/utxo"));case 5:if(d=e.sent,!x(d)){e.next=9;break}return e.abrupt("return",(d.data||[]).map((function(e){return{txId:e.txid,outputIndex:e.outIndex,satoshis:e.value,address:t}})));case 9:throw new Error(d.statusText);case 10:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function B(e,a){return F.apply(this,arguments)}function F(){return(F=Object(s.a)(Object(n.a)().mark((function e(a,t){var c,r,s,d,b;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=1,r=16,s="0";case 3:return e.next=5,A(a,t,c,r);case 5:if(d=e.sent,b=d.reduce((function(e,a){return u.j(e,a.satoshis)}),"0"),s=u.j(s,b),!(d.length<r)){e.next=10;break}return e.abrupt("break",13);case 10:c++;case 11:e.next=3;break;case 13:return console.log("balance",s),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,a){return L.apply(this,arguments)}function L(){return(L=Object(s.a)(Object(n.a)().mark((function e(a,t){var c,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=h(a),console.log("sensible \u4ea4\u6613\u5e7f\u64ad",a,t),e.next=4,o.a.post("".concat(c,"/tx/broadcast"),{hex:t});case 4:if(r=e.sent,!x(r)){e.next=8;break}return e.abrupt("return",new d.mvc.Transaction(t).hash);case 8:throw new Error("broadcast failed");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(e){return"Insufficient balance."===e.message?new Error("Low mvc balance to pay miners"):e},E=function(e,a){var t=p.find((function(t){return t.codehash===e&&t.genesis===a}));return t?t.satotxList:[]},z=function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];for(var c=0,n=a;c<n.length;c++){var r=n[c];if(r&&r.length>0)return r}return[]};function H(e,a,t,c,n,r){return R.apply(this,arguments)}function R(){return R=Object(s.a)(Object(n.a)().mark((function e(a,t,c,r,s,d){var b,f,o,l,p,h,x,v,m,O,g,w,k,y,S,T,I,P,K,A,C,B,F,N,L=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b=L.length>6&&void 0!==L[6]&&L[6],f=L.length>7&&void 0!==L[7]&&L[7],o=E(s,d),t=z(t,o),console.log("signers",t),l=new i.SensibleFT({network:a,purse:c,feeb:1}),console.log("transferSensibleFt",r,a,s,d,t),e.prev=7,e.next=10,l.transfer({senderWif:c,receivers:r,codehash:s,genesis:d,utxos:b,noBroadcast:f});case 10:if(p=e.sent,h=p.txid,x=p.tx,v=p.routeCheckTx,!0!==f){e.next=16;break}return e.abrupt("return",{tx:x,routeCheckTx:v});case 16:return u.a(x),m=Y(a,x.serialize(!0)),e.abrupt("return",{txid:h,outputs:m.outputs});case 21:if(e.prev=21,e.t0=e.catch(7),O=_(e.t0),g=O.toString(),w=g.indexOf("Mvc utxos should be no more than 3 in ")>0,k=g.indexOf("Too many token-utxos")>0,console.log("broadcast sensible ft error"),console.error(O),w||k){e.next=31;break}throw O;case 31:if(!w){e.next=64;break}return e.prev=32,e.next=35,G(a,c);case 35:return e.next=37,j(3e3);case 37:e.next=44;break;case 39:throw e.prev=39,e.t1=e.catch(32),console.log("merge mvc utxo fail"),console.error(e.t1),e.t1;case 44:return e.prev=44,e.next=47,l.transfer({senderWif:c,receivers:r,codehash:s,genesis:d});case 47:return y=e.sent,S=y.txid,T=y.tx,u.a(T),I=Y(a,T.serialize(!0)),e.abrupt("return",{txid:S,outputs:I.outputs});case 55:if(e.prev=55,e.t2=e.catch(44),P=_(e.t2),console.log("ft transfer fail after mvc utxo merge"),console.error(P),K=P.toString(),k=K.indexOf("Too many token-utxos")>0){e.next=64;break}throw P;case 64:if(!k){e.next=94;break}return e.prev=65,e.next=68,l.merge();case 68:return e.next=70,j(3e3);case 70:e.next=77;break;case 72:throw e.prev=72,e.t3=e.catch(65),console.log("merge ft utxo fail"),console.error(e.t3),e.t3;case 77:return e.prev=77,e.next=80,l.transfer({senderWif:c,receivers:r,codehash:s,genesis:d});case 80:return A=e.sent,C=A.txid,B=A.tx,u.a(B),F=Y(a,B.serialize(!0)),e.abrupt("return",{txid:C,outputs:F.outputs});case 88:throw e.prev=88,e.t4=e.catch(77),N=_(e.t4),console.log("ft transfer fail after ft utxo merge"),console.error(N),N;case 94:case"end":return e.stop()}}),e,null,[[7,21],[32,39],[44,55],[65,72],[77,88]])}))),R.apply(this,arguments)}var q=d.mvc.crypto.Signature,D=q.SIGHASH_ALL|q.SIGHASH_FORKID;function M(e,a,t,c){var n=new d.mvc.Transaction.Signature({publicKey:e.publicKey,prevTxId:a.inputs[t].prevTxId,outputIndex:a.inputs[t].outputIndex,inputIndex:t,signature:d.mvc.Transaction.Sighash.sign(a,e,c,t,a.inputs[t].output.script,a.inputs[t].output.satoshisBN),sigtype:c});a.inputs[t].setScript(d.mvc.Script.buildPublicKeyHashIn(n.publicKey,n.signature.toDER(),n.sigtype))}function W(e,a,t){var c=!0,n={},r=function(e,a){return"".concat(e,"_").concat(u.l(a))};a.outputs.forEach((function(e){var a=e.script.toAddress(t),c=e.satoshis,s=r(a,c);n[s]=(n[s]||0)+1}));for(var s=0;s<e.length;s++){var d=e[s],b=r(d.address,d.amount);if(!n[b]){c=!1;break}n[b]=n[b]-1}return c}function J(e,a,t){return V.apply(this,arguments)}function V(){return V=Object(s.a)(Object(n.a)().mark((function e(a,t,c){var r,s,b,f,o,i,p,h,x,j,v,m,O,g,w,k,y=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>3&&void 0!==y[3]&&y[3],s=y.length>4&&void 0!==y[4]&&y[4],console.log("arguments",a,t,c),b=new d.mvc.PrivateKey(t,a).toAddress(a),e.next=6,B(a,b);case 6:if(f=e.sent,o=c.reduce((function(e,a){return u.j(e,a.amount)}),"0"),!u.f(f,o)){e.next=10;break}throw new Error("Insufficient_bsv_Balance");case 10:i="0",p=[],(h=new d.mvc.Transaction).feePerKb(500),x=456,j=16,v=1;case 17:return e.next=19,A(a,b,v,j);case 19:m=e.sent,O=0;case 21:if(!(O<m.length)){e.next=31;break}if(g=m[O],i=u.j(i,g.satoshis),p.push(g),h.addInput(new d.mvc.Transaction.Input.PublicKeyHash({output:new d.mvc.Transaction.Output({script:d.mvc.Script.buildPublicKeyHashOut(g.address),satoshis:g.satoshis}),prevTxId:g.txId,outputIndex:g.outputIndex,script:d.mvc.Script.empty()})),s||!u.g(u.j(o,x),i)){e.next=28;break}return e.abrupt("break",31);case 28:O++,e.next=21;break;case 31:if(s||!u.g(u.j(o,x),i)){e.next=33;break}return e.abrupt("break",38);case 33:if(!(m.length<=j)){e.next=35;break}return e.abrupt("break",38);case 35:v++,e.next=17;break;case 38:if(c.forEach((function(e){h.to(e.address,+e.amount)})),u.d(u.h(i,+o),0)&&h.change(b),u.f(u.h(i,h.getFee(),o),x)&&(h.clearOutputs(),c.forEach((function(e,a){c.length===a+1?h.change(e.address):h.to(e.address,+e.amount)}))),h.inputs.forEach((function(e,a){M(new d.mvc.PrivateKey(t),h,a,D)})),u.a(h),!0!==r){e.next=45;break}return e.abrupt("return",h);case 45:return e.next=47,N(a,h.serialize());case 47:return w=e.sent,k=Y(a,h.serialize(!0)),W(c,h,a)||(console.log(u.k({type:"bsvTransferAmountNotSatified",txid:h.hash,receivers:c,outputs:k.outputs})),l.b("bsvTransferAmountNotSatified_".concat(b,"_").concat(h.hash))),e.abrupt("return",{txid:w,outputs:k.outputs,fee:h.getFee()});case 52:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function G(e,a){return U.apply(this,arguments)}function U(){return(U=Object(s.a)(Object(n.a)().mark((function e(a,t){var c,r,s,b,f;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new d.mvc.PrivateKey(t,a).toAddress(a),e.next=3,A(a,c,1);case 3:return r=e.sent,(s=new d.mvc.Transaction).feePerKb(500),r.forEach((function(e){s.addInput(new d.mvc.Transaction.Input.PublicKeyHash({output:new d.mvc.Transaction.Output({script:d.mvc.Script.buildPublicKeyHashOut(e.address),satoshis:e.satoshis}),prevTxId:e.txId,outputIndex:e.outputIndex,script:d.mvc.Script.empty()}))})),s.change(c),s.inputs.forEach((function(e,a){M(new d.mvc.PrivateKey(t),s,a,D)})),u.a(s),e.next=12,N(a,s.serialize());case 12:return b=e.sent,f=Y(a,s.serialize(!0)),e.abrupt("return",{txid:b,outputs:f.outputs});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,a){var t;try{t=new d.mvc.Transaction(a)}catch(c){return{error:c.message}}return{inputs:t.inputs.map((function(a,t){var n=void a.script.toBuffer(),s={index:t,prevTxId:a.prevTxId.toString("hex"),outputIndex:a.outputIndex,script:a.script.toString("hex")};try{var d=a.script.toAddress(e);d&&(s.address=d.toString())}catch(c){}return n?n.tokenAmount<=0?s:s=Object(r.a)(Object(r.a)({},s),{},{isFt:!0,ftDetail:{genesis:n.genesis,codehash:n.codehash,address:n.tokenAddress,decimal:n.decimalNum,name:n.tokenName,symbol:n.tokenSymbol}}):s})),outputs:t.outputs.map((function(a,t){var n=void a.script.toBuffer(),s={index:t,satoshis:a.satoshis,script:a.script.toString("hex")};try{var d=a.script.toAddress(e);d&&(s.address=d.toString())}catch(c){}return n?n.tokenAmount<=0?s:s=Object(r.a)(Object(r.a)({},s),{},{isFt:!0,ftDetail:{genesis:n.genesis,codehash:n.codehash,address:n.tokenAddress,decimal:n.decimalNum,name:n.tokenName,symbol:n.tokenSymbol,amount:n.tokenAmount}}):s})),txid:t.hash}}window.transferBsv=J,window.signAnyTx=y}).call(this,t(10).Buffer)},353:function(e,a){},398:function(e){e.exports=JSON.parse('[{"codehash":"514776383faa66e4a65808904d4d6724e4774fbe","genesis":"d486f42fd4930c964f6840a2997b0ef9b3abc38d","satotxList":[{"satotxApiPrefix":"https://satotx.showpay.top","satotxPubKey":"5b94858991d384c61ffd97174e895fcd4f62e4fea618916dc095fe4c149bbdf1188c9b33bc15cbe963a63b2522e70b80a5b722ac0e6180407917403755df4de27d69cc115c683a99face8c823cbccf73c7f0d546f1300b9ee2e96aea85542527f33b649f1885caebe19cf75d9a645807f03565c65bd4c99c8f6bb000644cfb56969eac3e9331c254b08aa279ceb64c47ef66be3f071e28b3a5a21e48cdfc3335d8b52e80a09a104a791ace6a2c1b4da88c52f9cc28c54a324e126ec91a988c1fe4e21afc8a84d0e876e01502386f74e7fc24fc32aa249075dd222361aea119d4824db2a797d58886e93bdd60556e504bb190b76a451a4e7b0431973c0410e71e808d0962415503931bbde3dfce5186b371c5bf729861f239ef626b7217d071dfd62bac877a847f2ac2dca07597a0bb9dc1969bed40606c025c4ff7b53a4a6bd921642199c16ede8165ed28da161739fa8d33f9f483212759498c1219d246092d14c9ae63808f58f03c8ca746904ba51fa326d793cea80cda411c85d35894bdb5"},{"satotxApiPrefix":"https://satotx2.showpay.top","satotxPubKey":"09539fcf01e83c7c649164ddd0dd42463ef10a98c665cd0d9f791446a3c4c2dd3916f6e76075b36a06f40731821f6b7dbb8bea8effa4ea461fecce4b6b2d45ca4dd923028fd6dc6ce49512616ca55f01162e5d2f85faa22ec40bc35d4978204a9b07a53f04297b886fa4abb095034f106f8ff0fd172e1e96bf7198cd5b9944ec1af32328a156877769ecabd41489a7ac858fd35cd8d93e68f33053077cf50bb397b66d160598963d1b663b3bce6371877df0e33866e4d9557b0bde7a2a930c274fa9e697d9f17ad88528ecab1be32a9d518bb950fc8264f2056d4f395fcdc12dd59cb8945013105ed52433326e3fa067237f17ab62e65557c7538e634daf11288b7eaab537abf2cc2a90159632fb9bb8fac01085b70024e01e42cd431db70d004963e46da8733c18fd5ffaaecfd67c860ae37441271ba545f86cae72690a5a3261e0125a2bf069fe28a1e1431b4cac29f8a43cbefbe22d5ae4b92441f8915881560271ee31379d365da38f1a5fa1414d6ad71943a083cce0ee45d47f81ff3c9d"},{"satotxApiPrefix":"https://satotx3.showpay.top","satotxPubKey":"8e37df222f9af47980ad72d31b2619b49460c7be3a4c1034c0e7f43146d80058e52bfc53b0608db5a9ec5cb832c326f785f5c4e4349cc9fd647839738f465573d1707ef84d14c41ad857a1a8e5a075ae953be4c52481ee3b8e85891613dcf99c1f7bf3a51cd67ed92f9b71d77b8517a57af5fb4e2bad7197031e00c1d8b85d0abc62fb98952d9ddfb43b47c01590ef0a365aed89b179505ccfd1d70effe4d375d5e774578434f8f9bb2281100b6e1daf8df4a40af35853c91aee2dc7f578034fa534586985e4df30b7a85efab943f68f01b46f72ced16655ac4f7e7f0439e0e6b43803dc7e262512c57ef862d41b98344ea6e725683846d91209ad87097cb4ae7092cc2c4ebd39383905e61eeaae495d8b3a57f9da8cca760b9546635cef2a8728c4209891ad1e5cbeb75d2b798f0dabd1eceaf4b297186fd2a45ed58fbaed886a4dc2f8690c9070061b9481e446319b7f0a54f9d94e7505e87e3d81bcd664ecc29acc2942361e60b30fa965cdc88185163c2857644d837c9d839bb9f6b8e6dd"},{"satotxApiPrefix":"https://s1.satoplay.com","satotxPubKey":"2c8c0117aa5edba9a4539e783b6a1bdbc1ad88ad5b57f3d9c5cba55001c45e1fedb877ebc7d49d1cfa8aa938ccb303c3a37732eb0296fee4a6642b0ff1976817b603404f64c41ec098f8cd908caf64b4a3aada220ff61e252ef6d775079b69451367eda8fdb37bc55c8bfd69610e1f31b9d421ff44e3a0cfa7b11f334374827256a0b91ce80c45ffb798798e7bd6b110134e1a3c3fa89855a19829aab3922f55da92000495737e99e0094e6c4dbcc4e8d8de5459355c21ff055d039a202076e4ca263b745a885ef292eec0b5a5255e6ecc45534897d9572c3ebe97d36626c7b1e775159e00b17d03bc6d127260e13a252afd89bab72e8daf893075f18c1840cb394f18a9817913a9462c6ffc8951bee50a05f38da4c9090a4d6868cb8c955e5efb4f3be4e7cf0be1c399d78a6f6dd26a0af8492dca67843c6da9915bae571aa9f4696418ab1520dd50dd05f5c0c7a51d2843bd4d9b6b3b79910e98f3d98099fd86d71b2fac290e32bdacb31943a8384a7668c32a66be127b74390b4b0dec6455"},{"satotxApiPrefix":"https://satotx.metasv.com","satotxPubKey":"19d9193ee2e95d09445d28408e8a3da730b2d557cd8d39a7ae4ebbfbceb17ed5d745623529ad33d043511f3e205c1f92b6322833424d19823c3b611b3adabb74e1006e0e93a8f1e0b97ab801c6060a4c060f775998d9f003568ab4ea7633a0395eb761c36106e229394f2c271b8522a44a5ae759254f5d22927923ba85b3729460ecccca07a5556299aa7f2518814c74a2a4d48b48013d609002631f2d93c906d07077ef58d473e3d971362d1129c1ab9b8f9b1365519f0c023c1cadad5ab57240d19e256e08022fd0708951ff90a8af0655aff806c6382d0a72c13f1e52b88222d7dfc6357179b06ffcf937f9da3b0419908aa589a731e26bbaba2fa0b754bf722e338c5627b11dc24aadc4d83c35851c034936cf0df18167e856a5f0a7121d23cd48b3f8a420869a37bd1362905d7f76ff18a991f75a0f9d1bcfc18416d76691cc357cbdcc8cc0df9dbd9318a40e08adb2fb4e78b3c47bdf07eeed4f3f4e0f7e81e37460a09b857e0194c72ec03bb564b5b409d8a1b84c153186ecbb4cfdfd"}]},{"codehash":"514776383faa66e4a65808904d4d6724e4774fbe","genesis":"9757197ec84183cd39e2239e56c8cc04fce9f9cd","satotxList":[{"satotxApiPrefix":"https://satotx.showpay.top","satotxPubKey":"5b94858991d384c61ffd97174e895fcd4f62e4fea618916dc095fe4c149bbdf1188c9b33bc15cbe963a63b2522e70b80a5b722ac0e6180407917403755df4de27d69cc115c683a99face8c823cbccf73c7f0d546f1300b9ee2e96aea85542527f33b649f1885caebe19cf75d9a645807f03565c65bd4c99c8f6bb000644cfb56969eac3e9331c254b08aa279ceb64c47ef66be3f071e28b3a5a21e48cdfc3335d8b52e80a09a104a791ace6a2c1b4da88c52f9cc28c54a324e126ec91a988c1fe4e21afc8a84d0e876e01502386f74e7fc24fc32aa249075dd222361aea119d4824db2a797d58886e93bdd60556e504bb190b76a451a4e7b0431973c0410e71e808d0962415503931bbde3dfce5186b371c5bf729861f239ef626b7217d071dfd62bac877a847f2ac2dca07597a0bb9dc1969bed40606c025c4ff7b53a4a6bd921642199c16ede8165ed28da161739fa8d33f9f483212759498c1219d246092d14c9ae63808f58f03c8ca746904ba51fa326d793cea80cda411c85d35894bdb5"},{"satotxApiPrefix":"https://satotx2.showpay.top","satotxPubKey":"09539fcf01e83c7c649164ddd0dd42463ef10a98c665cd0d9f791446a3c4c2dd3916f6e76075b36a06f40731821f6b7dbb8bea8effa4ea461fecce4b6b2d45ca4dd923028fd6dc6ce49512616ca55f01162e5d2f85faa22ec40bc35d4978204a9b07a53f04297b886fa4abb095034f106f8ff0fd172e1e96bf7198cd5b9944ec1af32328a156877769ecabd41489a7ac858fd35cd8d93e68f33053077cf50bb397b66d160598963d1b663b3bce6371877df0e33866e4d9557b0bde7a2a930c274fa9e697d9f17ad88528ecab1be32a9d518bb950fc8264f2056d4f395fcdc12dd59cb8945013105ed52433326e3fa067237f17ab62e65557c7538e634daf11288b7eaab537abf2cc2a90159632fb9bb8fac01085b70024e01e42cd431db70d004963e46da8733c18fd5ffaaecfd67c860ae37441271ba545f86cae72690a5a3261e0125a2bf069fe28a1e1431b4cac29f8a43cbefbe22d5ae4b92441f8915881560271ee31379d365da38f1a5fa1414d6ad71943a083cce0ee45d47f81ff3c9d"},{"satotxApiPrefix":"https://satotx3.showpay.top","satotxPubKey":"8e37df222f9af47980ad72d31b2619b49460c7be3a4c1034c0e7f43146d80058e52bfc53b0608db5a9ec5cb832c326f785f5c4e4349cc9fd647839738f465573d1707ef84d14c41ad857a1a8e5a075ae953be4c52481ee3b8e85891613dcf99c1f7bf3a51cd67ed92f9b71d77b8517a57af5fb4e2bad7197031e00c1d8b85d0abc62fb98952d9ddfb43b47c01590ef0a365aed89b179505ccfd1d70effe4d375d5e774578434f8f9bb2281100b6e1daf8df4a40af35853c91aee2dc7f578034fa534586985e4df30b7a85efab943f68f01b46f72ced16655ac4f7e7f0439e0e6b43803dc7e262512c57ef862d41b98344ea6e725683846d91209ad87097cb4ae7092cc2c4ebd39383905e61eeaae495d8b3a57f9da8cca760b9546635cef2a8728c4209891ad1e5cbeb75d2b798f0dabd1eceaf4b297186fd2a45ed58fbaed886a4dc2f8690c9070061b9481e446319b7f0a54f9d94e7505e87e3d81bcd664ecc29acc2942361e60b30fa965cdc88185163c2857644d837c9d839bb9f6b8e6dd"},{"satotxApiPrefix":"https://s1.satoplay.com","satotxPubKey":"2c8c0117aa5edba9a4539e783b6a1bdbc1ad88ad5b57f3d9c5cba55001c45e1fedb877ebc7d49d1cfa8aa938ccb303c3a37732eb0296fee4a6642b0ff1976817b603404f64c41ec098f8cd908caf64b4a3aada220ff61e252ef6d775079b69451367eda8fdb37bc55c8bfd69610e1f31b9d421ff44e3a0cfa7b11f334374827256a0b91ce80c45ffb798798e7bd6b110134e1a3c3fa89855a19829aab3922f55da92000495737e99e0094e6c4dbcc4e8d8de5459355c21ff055d039a202076e4ca263b745a885ef292eec0b5a5255e6ecc45534897d9572c3ebe97d36626c7b1e775159e00b17d03bc6d127260e13a252afd89bab72e8daf893075f18c1840cb394f18a9817913a9462c6ffc8951bee50a05f38da4c9090a4d6868cb8c955e5efb4f3be4e7cf0be1c399d78a6f6dd26a0af8492dca67843c6da9915bae571aa9f4696418ab1520dd50dd05f5c0c7a51d2843bd4d9b6b3b79910e98f3d98099fd86d71b2fac290e32bdacb31943a8384a7668c32a66be127b74390b4b0dec6455"},{"satotxApiPrefix":"https://satotx.metasv.com","satotxPubKey":"19d9193ee2e95d09445d28408e8a3da730b2d557cd8d39a7ae4ebbfbceb17ed5d745623529ad33d043511f3e205c1f92b6322833424d19823c3b611b3adabb74e1006e0e93a8f1e0b97ab801c6060a4c060f775998d9f003568ab4ea7633a0395eb761c36106e229394f2c271b8522a44a5ae759254f5d22927923ba85b3729460ecccca07a5556299aa7f2518814c74a2a4d48b48013d609002631f2d93c906d07077ef58d473e3d971362d1129c1ab9b8f9b1365519f0c023c1cadad5ab57240d19e256e08022fd0708951ff90a8af0655aff806c6382d0a72c13f1e52b88222d7dfc6357179b06ffcf937f9da3b0419908aa589a731e26bbaba2fa0b754bf722e338c5627b11dc24aadc4d83c35851c034936cf0df18167e856a5f0a7121d23cd48b3f8a420869a37bd1362905d7f76ff18a991f75a0f9d1bcfc18416d76691cc357cbdcc8cc0df9dbd9318a40e08adb2fb4e78b3c47bdf07eeed4f3f4e0f7e81e37460a09b857e0194c72ec03bb564b5b409d8a1b84c153186ecbb4cfdfd"}]},{"codehash":"777e4dd291059c9f7a0fd563f7204576dcceb791","genesis":"54256eb1b9c815a37c4af1b82791ec6bdf5b3fa3","name":"mc","satotxList":[{"satotxApiPrefix":"https://satotx.showpay.top","satotxPubKey":"5b94858991d384c61ffd97174e895fcd4f62e4fea618916dc095fe4c149bbdf1188c9b33bc15cbe963a63b2522e70b80a5b722ac0e6180407917403755df4de27d69cc115c683a99face8c823cbccf73c7f0d546f1300b9ee2e96aea85542527f33b649f1885caebe19cf75d9a645807f03565c65bd4c99c8f6bb000644cfb56969eac3e9331c254b08aa279ceb64c47ef66be3f071e28b3a5a21e48cdfc3335d8b52e80a09a104a791ace6a2c1b4da88c52f9cc28c54a324e126ec91a988c1fe4e21afc8a84d0e876e01502386f74e7fc24fc32aa249075dd222361aea119d4824db2a797d58886e93bdd60556e504bb190b76a451a4e7b0431973c0410e71e808d0962415503931bbde3dfce5186b371c5bf729861f239ef626b7217d071dfd62bac877a847f2ac2dca07597a0bb9dc1969bed40606c025c4ff7b53a4a6bd921642199c16ede8165ed28da161739fa8d33f9f483212759498c1219d246092d14c9ae63808f58f03c8ca746904ba51fa326d793cea80cda411c85d35894bdb5"},{"satotxApiPrefix":"https://satotx2.showpay.top","satotxPubKey":"09539fcf01e83c7c649164ddd0dd42463ef10a98c665cd0d9f791446a3c4c2dd3916f6e76075b36a06f40731821f6b7dbb8bea8effa4ea461fecce4b6b2d45ca4dd923028fd6dc6ce49512616ca55f01162e5d2f85faa22ec40bc35d4978204a9b07a53f04297b886fa4abb095034f106f8ff0fd172e1e96bf7198cd5b9944ec1af32328a156877769ecabd41489a7ac858fd35cd8d93e68f33053077cf50bb397b66d160598963d1b663b3bce6371877df0e33866e4d9557b0bde7a2a930c274fa9e697d9f17ad88528ecab1be32a9d518bb950fc8264f2056d4f395fcdc12dd59cb8945013105ed52433326e3fa067237f17ab62e65557c7538e634daf11288b7eaab537abf2cc2a90159632fb9bb8fac01085b70024e01e42cd431db70d004963e46da8733c18fd5ffaaecfd67c860ae37441271ba545f86cae72690a5a3261e0125a2bf069fe28a1e1431b4cac29f8a43cbefbe22d5ae4b92441f8915881560271ee31379d365da38f1a5fa1414d6ad71943a083cce0ee45d47f81ff3c9d"},{"satotxApiPrefix":"https://satotx3.showpay.top","satotxPubKey":"8e37df222f9af47980ad72d31b2619b49460c7be3a4c1034c0e7f43146d80058e52bfc53b0608db5a9ec5cb832c326f785f5c4e4349cc9fd647839738f465573d1707ef84d14c41ad857a1a8e5a075ae953be4c52481ee3b8e85891613dcf99c1f7bf3a51cd67ed92f9b71d77b8517a57af5fb4e2bad7197031e00c1d8b85d0abc62fb98952d9ddfb43b47c01590ef0a365aed89b179505ccfd1d70effe4d375d5e774578434f8f9bb2281100b6e1daf8df4a40af35853c91aee2dc7f578034fa534586985e4df30b7a85efab943f68f01b46f72ced16655ac4f7e7f0439e0e6b43803dc7e262512c57ef862d41b98344ea6e725683846d91209ad87097cb4ae7092cc2c4ebd39383905e61eeaae495d8b3a57f9da8cca760b9546635cef2a8728c4209891ad1e5cbeb75d2b798f0dabd1eceaf4b297186fd2a45ed58fbaed886a4dc2f8690c9070061b9481e446319b7f0a54f9d94e7505e87e3d81bcd664ecc29acc2942361e60b30fa965cdc88185163c2857644d837c9d839bb9f6b8e6dd"},{"satotxApiPrefix":"https://s1.satoplay.com","satotxPubKey":"2c8c0117aa5edba9a4539e783b6a1bdbc1ad88ad5b57f3d9c5cba55001c45e1fedb877ebc7d49d1cfa8aa938ccb303c3a37732eb0296fee4a6642b0ff1976817b603404f64c41ec098f8cd908caf64b4a3aada220ff61e252ef6d775079b69451367eda8fdb37bc55c8bfd69610e1f31b9d421ff44e3a0cfa7b11f334374827256a0b91ce80c45ffb798798e7bd6b110134e1a3c3fa89855a19829aab3922f55da92000495737e99e0094e6c4dbcc4e8d8de5459355c21ff055d039a202076e4ca263b745a885ef292eec0b5a5255e6ecc45534897d9572c3ebe97d36626c7b1e775159e00b17d03bc6d127260e13a252afd89bab72e8daf893075f18c1840cb394f18a9817913a9462c6ffc8951bee50a05f38da4c9090a4d6868cb8c955e5efb4f3be4e7cf0be1c399d78a6f6dd26a0af8492dca67843c6da9915bae571aa9f4696418ab1520dd50dd05f5c0c7a51d2843bd4d9b6b3b79910e98f3d98099fd86d71b2fac290e32bdacb31943a8384a7668c32a66be127b74390b4b0dec6455"},{"satotxApiPrefix":"https://satotx.metasv.com","satotxPubKey":"19d9193ee2e95d09445d28408e8a3da730b2d557cd8d39a7ae4ebbfbceb17ed5d745623529ad33d043511f3e205c1f92b6322833424d19823c3b611b3adabb74e1006e0e93a8f1e0b97ab801c6060a4c060f775998d9f003568ab4ea7633a0395eb761c36106e229394f2c271b8522a44a5ae759254f5d22927923ba85b3729460ecccca07a5556299aa7f2518814c74a2a4d48b48013d609002631f2d93c906d07077ef58d473e3d971362d1129c1ab9b8f9b1365519f0c023c1cadad5ab57240d19e256e08022fd0708951ff90a8af0655aff806c6382d0a72c13f1e52b88222d7dfc6357179b06ffcf937f9da3b0419908aa589a731e26bbaba2fa0b754bf722e338c5627b11dc24aadc4d83c35851c034936cf0df18167e856a5f0a7121d23cd48b3f8a420869a37bd1362905d7f76ff18a991f75a0f9d1bcfc18416d76691cc357cbdcc8cc0df9dbd9318a40e08adb2fb4e78b3c47bdf07eeed4f3f4e0f7e81e37460a09b857e0194c72ec03bb564b5b409d8a1b84c153186ecbb4cfdfd"}]},{"codehash":"777e4dd291059c9f7a0fd563f7204576dcceb791","genesis":"8764ede9fa7bf81ba1eec5e1312cf67117d47930","name":"mc-lp","satotxList":[{"satotxApiPrefix":"https://satotx.showpay.top","satotxPubKey":"5b94858991d384c61ffd97174e895fcd4f62e4fea618916dc095fe4c149bbdf1188c9b33bc15cbe963a63b2522e70b80a5b722ac0e6180407917403755df4de27d69cc115c683a99face8c823cbccf73c7f0d546f1300b9ee2e96aea85542527f33b649f1885caebe19cf75d9a645807f03565c65bd4c99c8f6bb000644cfb56969eac3e9331c254b08aa279ceb64c47ef66be3f071e28b3a5a21e48cdfc3335d8b52e80a09a104a791ace6a2c1b4da88c52f9cc28c54a324e126ec91a988c1fe4e21afc8a84d0e876e01502386f74e7fc24fc32aa249075dd222361aea119d4824db2a797d58886e93bdd60556e504bb190b76a451a4e7b0431973c0410e71e808d0962415503931bbde3dfce5186b371c5bf729861f239ef626b7217d071dfd62bac877a847f2ac2dca07597a0bb9dc1969bed40606c025c4ff7b53a4a6bd921642199c16ede8165ed28da161739fa8d33f9f483212759498c1219d246092d14c9ae63808f58f03c8ca746904ba51fa326d793cea80cda411c85d35894bdb5"},{"satotxApiPrefix":"https://satotx2.showpay.top","satotxPubKey":"09539fcf01e83c7c649164ddd0dd42463ef10a98c665cd0d9f791446a3c4c2dd3916f6e76075b36a06f40731821f6b7dbb8bea8effa4ea461fecce4b6b2d45ca4dd923028fd6dc6ce49512616ca55f01162e5d2f85faa22ec40bc35d4978204a9b07a53f04297b886fa4abb095034f106f8ff0fd172e1e96bf7198cd5b9944ec1af32328a156877769ecabd41489a7ac858fd35cd8d93e68f33053077cf50bb397b66d160598963d1b663b3bce6371877df0e33866e4d9557b0bde7a2a930c274fa9e697d9f17ad88528ecab1be32a9d518bb950fc8264f2056d4f395fcdc12dd59cb8945013105ed52433326e3fa067237f17ab62e65557c7538e634daf11288b7eaab537abf2cc2a90159632fb9bb8fac01085b70024e01e42cd431db70d004963e46da8733c18fd5ffaaecfd67c860ae37441271ba545f86cae72690a5a3261e0125a2bf069fe28a1e1431b4cac29f8a43cbefbe22d5ae4b92441f8915881560271ee31379d365da38f1a5fa1414d6ad71943a083cce0ee45d47f81ff3c9d"},{"satotxApiPrefix":"https://satotx3.showpay.top","satotxPubKey":"8e37df222f9af47980ad72d31b2619b49460c7be3a4c1034c0e7f43146d80058e52bfc53b0608db5a9ec5cb832c326f785f5c4e4349cc9fd647839738f465573d1707ef84d14c41ad857a1a8e5a075ae953be4c52481ee3b8e85891613dcf99c1f7bf3a51cd67ed92f9b71d77b8517a57af5fb4e2bad7197031e00c1d8b85d0abc62fb98952d9ddfb43b47c01590ef0a365aed89b179505ccfd1d70effe4d375d5e774578434f8f9bb2281100b6e1daf8df4a40af35853c91aee2dc7f578034fa534586985e4df30b7a85efab943f68f01b46f72ced16655ac4f7e7f0439e0e6b43803dc7e262512c57ef862d41b98344ea6e725683846d91209ad87097cb4ae7092cc2c4ebd39383905e61eeaae495d8b3a57f9da8cca760b9546635cef2a8728c4209891ad1e5cbeb75d2b798f0dabd1eceaf4b297186fd2a45ed58fbaed886a4dc2f8690c9070061b9481e446319b7f0a54f9d94e7505e87e3d81bcd664ecc29acc2942361e60b30fa965cdc88185163c2857644d837c9d839bb9f6b8e6dd"},{"satotxApiPrefix":"https://s1.satoplay.com","satotxPubKey":"2c8c0117aa5edba9a4539e783b6a1bdbc1ad88ad5b57f3d9c5cba55001c45e1fedb877ebc7d49d1cfa8aa938ccb303c3a37732eb0296fee4a6642b0ff1976817b603404f64c41ec098f8cd908caf64b4a3aada220ff61e252ef6d775079b69451367eda8fdb37bc55c8bfd69610e1f31b9d421ff44e3a0cfa7b11f334374827256a0b91ce80c45ffb798798e7bd6b110134e1a3c3fa89855a19829aab3922f55da92000495737e99e0094e6c4dbcc4e8d8de5459355c21ff055d039a202076e4ca263b745a885ef292eec0b5a5255e6ecc45534897d9572c3ebe97d36626c7b1e775159e00b17d03bc6d127260e13a252afd89bab72e8daf893075f18c1840cb394f18a9817913a9462c6ffc8951bee50a05f38da4c9090a4d6868cb8c955e5efb4f3be4e7cf0be1c399d78a6f6dd26a0af8492dca67843c6da9915bae571aa9f4696418ab1520dd50dd05f5c0c7a51d2843bd4d9b6b3b79910e98f3d98099fd86d71b2fac290e32bdacb31943a8384a7668c32a66be127b74390b4b0dec6455"},{"satotxApiPrefix":"https://satotx.metasv.com","satotxPubKey":"19d9193ee2e95d09445d28408e8a3da730b2d557cd8d39a7ae4ebbfbceb17ed5d745623529ad33d043511f3e205c1f92b6322833424d19823c3b611b3adabb74e1006e0e93a8f1e0b97ab801c6060a4c060f775998d9f003568ab4ea7633a0395eb761c36106e229394f2c271b8522a44a5ae759254f5d22927923ba85b3729460ecccca07a5556299aa7f2518814c74a2a4d48b48013d609002631f2d93c906d07077ef58d473e3d971362d1129c1ab9b8f9b1365519f0c023c1cadad5ab57240d19e256e08022fd0708951ff90a8af0655aff806c6382d0a72c13f1e52b88222d7dfc6357179b06ffcf937f9da3b0419908aa589a731e26bbaba2fa0b754bf722e338c5627b11dc24aadc4d83c35851c034936cf0df18167e856a5f0a7121d23cd48b3f8a420869a37bd1362905d7f76ff18a991f75a0f9d1bcfc18416d76691cc357cbdcc8cc0df9dbd9318a40e08adb2fb4e78b3c47bdf07eeed4f3f4e0f7e81e37460a09b857e0194c72ec03bb564b5b409d8a1b84c153186ecbb4cfdfd"}]}]')},425:function(e,a,t){},443:function(e,a){},449:function(e,a){},450:function(e,a){},471:function(e,a){},473:function(e,a){},482:function(e,a){},484:function(e,a){},515:function(e,a){},517:function(e,a){},524:function(e,a){},525:function(e,a){},696:function(e,a,t){},770:function(e,a,t){"use strict";t.r(a);var c=t(0),n=t.n(c),r=t(59),s=t.n(r),d=(t(425),t(3)),b=t(9),f=t(20),o=t(4),i=t(181),u=t(785),l=t(132),p=t(784),h=t(782),x=t(781),j=t(779),v=t(775),m=t(776),O=t(780),g=t(277),w=t(786),k=t(783),y=t(787),S=t(788),T=t(415),I=t(789),P=t(414),K=t(396),A=t(21),C=t(33),B=t(220),F=t(402),N={satotxApiPrefix:"https://api.satotx.com",satotxPubKey:"25108ec89eb96b99314619eb5b124f11f00307a833cda48f5ab1865a04d4cfa567095ea4dd47cdf5c7568cd8efa77805197a67943fe965b0a558216011c374aa06a7527b20b0ce9471e399fa752e8c8b72a12527768a9fc7092f1a7057c1a1514b59df4d154df0d5994ff3b386a04d819474efbd99fb10681db58b1bd857f6d5"},L={account:null,key:null,bsvBalance:null,sensibleFtList:[],satotxConfigMap:new Map};L.satotxConfigMap.set("5b3bfa8e7600d701e70551075573ea28fd16c25a39fe2bdafdc3e08b11ca76b800000000",[N,N,N]);var _=Object(F.a)(L),E=_.useGlobalState,z=_.getGlobalState,H=_.setGlobalState,R="accountStorageKey";function q(e){var a=e?JSON.stringify(e):"";localStorage.setItem(R,a)}function D(){var e=localStorage.getItem(R);return e?JSON.parse(e):null}var M=0,W=0;function J(){return V.apply(this,arguments)}function V(){return V=Object(f.a)(Object(b.a)().mark((function e(){var a;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(M),a=function(){var e=Object(f.a)(Object(b.a)().mark((function e(){var a,t,c;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=z("account"),t=z("key"),a&&t){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(C.d)(a.network,t.address);case 7:c=e.sent,H("bsvBalance",{balance:c}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("getAddressBsvBalance err",a.network,t.address,e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),e.next=4,a();case 4:M=window.setInterval(a,5e3);case 5:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function G(){return U.apply(this,arguments)}function U(){return U=Object(f.a)(Object(b.a)().mark((function e(){var a;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(W),a=function(){var e=Object(f.a)(Object(b.a)().mark((function e(){var a,t,c,n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=z("account"),t=z("key"),a&&t){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(C.e)(a.network,t.address);case 7:c=e.sent,n=c.filter((function(e){return e.codehash,!0})),H("sensibleFtList",n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log("getAddressSensibleFtList err",a.network,t.address,e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),e.next=4,a();case 4:W=window.setInterval(a,5e3);case 5:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function Y(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(f.a)(Object(b.a)().mark((function e(a){var t;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(a),!a){e.next=10;break}return t=Object(C.c)(a.email,a.password,a.network),H("account",a),H("key",t),e.next=7,G();case 7:J(),e.next=12;break;case 10:H("account",null),H("key",null);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=function(e){return new Promise((function(a){return setTimeout(a,e)}))};function X(){return X=Object(f.a)(Object(b.a)().mark((function e(){var a,t,c,n,r,s,o,i,u,l,p,h,x;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window!==window.top){e.next=2;break}return e.abrupt("return");case 2:a=JSON.parse(decodeURIComponent(window.location.hash.substr(1))),t=B(window.top,"*"),c=a.id,n=null,r=null,s=[],o=null,t.emit(c,{type:"ready"}),i=function(e,a){return!e&&!a||(null===e||void 0===e?void 0:e.balance)===(null===a||void 0===a?void 0:a.balance)},u=function(e,a){if(e.length!==a.length)return!1;e.sort((function(e,a){return e.genesis.localeCompare(a.genesis)})),a.sort((function(e,a){return e.genesis.localeCompare(a.genesis)}));for(var t=0;t<e.length;t++){var c=e[t],n=a[t];if(c.genesis!==n.genesis)return!1;if(c.balance!==n.balance)return!1}return!0},l=function(e,a){return(null===e||void 0===e?void 0:e.email)===(null===a||void 0===a?void 0:a.email)&&(null===e||void 0===e?void 0:e.network)===(null===a||void 0===a?void 0:a.network)&&(null===e||void 0===e?void 0:e.password)===(null===a||void 0===a?void 0:a.password)},p=function(){var e=Object(f.a)(Object(b.a)().mark((function e(){var a,d,f,p,h;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=D(),l(a,n)||t.emit(c,{type:"account",data:a}),!(n=a)){e.next=30;break}return o=Object(C.c)(n.email,n.password,n.network),e.prev=5,e.next=8,Object(C.d)(n.network,o.address);case 8:d=e.sent,f=i(r,{balance:d}),r={balance:d},f||t.emit(c,{type:"bsvBalance",data:r}),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(5);case 16:return e.prev=16,e.next=19,Object(C.e)(n.network,o.address);case 19:p=e.sent,h=u(s,p),s=p,h||t.emit(c,{type:"sensibleFtBalance",data:s}),e.next=27;break;case 25:e.prev=25,e.t1=e.catch(16);case 27:return e.abrupt("return",!0);case 30:return e.abrupt("return",!1);case 31:case"end":return e.stop()}}),e,null,[[5,14],[16,25]])})));return function(){return e.apply(this,arguments)}}(),h=function(e,a){t.on(c,function(){var n=Object(f.a)(Object(b.a)().mark((function n(r,s){var d,f,o,i;return Object(b.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(d=s.type,f=s.data,"request"!==d||(null===f||void 0===f?void 0:f.method)!==e){n.next=13;break}return o=f.requestId,n.prev=3,n.next=6,a(f.params);case 6:i=n.sent,t.emit(c,{type:"response",data:{requestId:o,method:e,response:i}}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),t.emit(c,{type:"response",data:{requestId:o,method:e,error:n.t0.toString()}});case 13:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e,a){return n.apply(this,arguments)}}())},h("getAccount",Object(f.a)(Object(b.a)().mark((function e(){return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:if(n){e.next=4;break}return e.abrupt("return",null);case 4:return e.abrupt("return",{name:n.email,email:n.email,network:n.network});case 5:case"end":return e.stop()}}),e)})))),h("getBsvBalance",Object(f.a)(Object(b.a)().mark((function e(){return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})))),h("getSensibleFtBalance",Object(f.a)(Object(b.a)().mark((function e(){return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})))),h("getAddress",Object(f.a)(Object(b.a)().mark((function e(){return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:if(o){e.next=4;break}return e.abrupt("return",null);case 4:return e.abrupt("return",o.address);case 5:case"end":return e.stop()}}),e)})))),h("signTx",function(){var e=Object(f.a)(Object(b.a)().mark((function e(a){var t,c,r;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.address,o){e.next=3;break}throw new Error("not_login");case 3:if(r===o.address){e.next=5;break}throw new Error("not_my_address");case 5:return e.abrupt("return",Object(C.k)(Object(d.a)(Object(d.a)({},a),{},{privateKey:new A.mvc.PrivateKey(o.privateKey,null===(t=n)||void 0===t?void 0:t.network),publicKey:new A.mvc.PublicKey(o.publicKey,null===(c=n)||void 0===c?void 0:c.network)})));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),h("logout",Object(f.a)(Object(b.a)().mark((function e(){return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(null);case 1:case"end":return e.stop()}}),e)})))),h("ping",(function(){return null}));case 22:return e.next=24,p();case 24:return x=e.sent,e.next=27,Q(x?3e3:500);case 27:e.next=22;break;case 29:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function $(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=Object(c.useRef)(!1);Object(c.useEffect)((function(){a&&!t.current&&(t.current=!0,e())}),[e,a])}t(696);var ee=t(15),ae=t(68),te=t(107),ce=t.n(te),ne=t(7),re=i.a.Option;function se(){var e=E("account"),a=Object(o.a)(e,1)[0],t=E("key"),n=Object(o.a)(t,1)[0],r=Object(c.useState)(!1),s=Object(o.a)(r,2),d=s[0],b=s[1],f=Object(c.useState)(""),x=Object(o.a)(f,2),j=x[0],v=x[1],m=Object(c.useState)(""),O=Object(o.a)(m,2),g=O[0],w=O[1],k=Object(c.useState)(!1),y=Object(o.a)(k,2),S=y[0],T=y[1];return Object(ne.jsxs)("div",{className:"header",children:[Object(ne.jsx)("div",{className:"logo",children:"Web Wallet"}),a&&Object(ne.jsx)(u.a,{title:"",content:Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(l.a,{type:"link",onClick:function(){Y(null)},children:"Logout"}),Object(ne.jsx)("br",{}),Object(ne.jsx)(l.a,{type:"link",onClick:function(){var e=Object(C.g)(a.network,n.address);window.open(e)},children:"History"}),Object(ne.jsx)("br",{}),Object(ne.jsx)(l.a,{type:"link",onClick:function(){window.open("http://github.com")},children:"Source Code"}),Object(ne.jsx)("br",{}),Object(ne.jsx)(l.a,{type:"link",onClick:function(){return b(!0)},children:"decode rawtx"})]}),children:Object(ne.jsx)(l.a,{type:"link",children:a.email})}),Object(ne.jsxs)(p.a,{visible:d,onCancel:function(){return b(!1)},children:[Object(ne.jsx)(h.a.TextArea,{rows:4,value:j,onChange:function(e){return v(e.target.value)}}),Object(ne.jsxs)(i.a,{style:{width:180},placeholder:"Select network",value:g,onChange:function(e){return w(e)},children:[Object(ne.jsx)(re,{value:"mainnet",children:"mainnet"}),Object(ne.jsx)(re,{value:"testnet",children:"testnet"})]}),Object(ne.jsx)(l.a,{type:"primary",onClick:function(){var e=Object(C.j)(g,j);console.log("decodeTx res",e)},children:"decode"})]}),Object(ne.jsx)(p.a,{visible:S,onCancel:function(){return T(!1)}})]})}function de(){var e=E("account"),a=Object(o.a)(e,1)[0],t=x.a.useForm(),c=Object(o.a)(t,1)[0];return a?null:Object(ne.jsx)(j.a,{className:"card",title:"Login",bordered:!1,children:Object(ne.jsxs)(x.a,{form:c,layout:"vertical",onFinish:function(){p.a.confirm({title:"\u5b89\u5168\u6ce8\u610f",content:Object(ne.jsxs)("div",{children:["Web\u94b1\u5305\u7684\u79c1\u94a5\u662f\u901a\u8fc7\u7528\u6237\u7684\u90ae\u7bb1\u548c\u5bc6\u7801\u5b9e\u65f6\u8ba1\u7b97\u5f97\u5230\uff0c\u4e0d\u4f1a\u4e0a\u4f20\u670d\u52a1\u5668\uff0c\u4e5f\u4e0d\u4f1a\u4fdd\u5b58\u5728\u672c\u5730(\u4ee3\u7801\u89c1",Object(ne.jsx)("a",{href:"https://github.com/klouskingsley/mvc-web-wallet",target:"_blank",rel:"noreferrer",children:"github"}),")\u3002\u4ec5\u4f9b\u65b9\u4fbf\u7528\u6237\u6d4b\u8bd5\u4e4b\u7528\uff0c\u4e0d\u9002\u5408\u5b58\u653e\u5927\u91cf\u8d44\u91d1\uff0c\u5efa\u8bae\u7528\u6237\u59a5\u5584\u4fdd\u7ba1\u90ae\u7bb1+\u5bc6\u7801\u7ec4\u5408\u4ee5\u9632\u8d44\u91d1\u4e22\u5931\uff0c\u6216\u5728\u4f7f\u7528\u5b8c\u6210\u4e4b\u540e\u5c06\u5269\u4f59\u8d44\u91d1\u8f6c\u79fb\u3002\u90ae\u7bb1+\u5bc6\u7801\u7ec4\u5408\u4e22\u5931(\u5fd8\u8bb0\uff0c\u88ab\u76d7\u7b49\u60c5\u5f62)\u4f1a\u5bfc\u81f4\u8d44\u4ea7\u4e22\u5931"]}),onOk:function(){Y(c.getFieldsValue())}})},children:[Object(ne.jsx)(x.a.Item,{name:"email",rules:[{type:"email",required:!0,message:"Please input a valid Email!"}],children:Object(ne.jsx)(h.a,{prefix:Object(ne.jsx)(y.a,{className:"site-form-item-icon"}),placeholder:"Email"})}),Object(ne.jsx)(x.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"},{min:6,message:"Password at least 6 chars",transform:function(e){return e&&e.trim()}}],children:Object(ne.jsx)(h.a.Password,{prefix:Object(ne.jsx)(S.a,{className:"site-form-item-icon"}),type:"password",visibilityToggle:!0,placeholder:"Password"})}),Object(ne.jsx)(x.a.Item,{name:"network",label:"Network",rules:[{required:!0}],children:Object(ne.jsxs)(i.a,{placeholder:"Select network",children:[Object(ne.jsx)(re,{value:"mainnet",children:"mainnet"}),Object(ne.jsx)(re,{value:"testnet",children:"testnet"})]})}),Object(ne.jsx)(x.a.Item,{children:"\u8bf4\u660e\uff1aWeb\u94b1\u5305\u7684\u79c1\u94a5\u662f\u901a\u8fc7\u7528\u6237\u7684\u90ae\u7bb1\u548c\u5bc6\u7801\u5b9e\u65f6\u8ba1\u7b97\u5f97\u5230(\u65e0\u9700\u6ce8\u518c)\uff0c\u6bcf\u6b21\u8f93\u5165\u76f8\u540c\u7684\u90ae\u7bb1\u548c\u5bc6\u7801\u767b\u5f55\u5373\u53ef\u8ba1\u7b97\u51fa\u76f8\u540c\u7684\u79c1\u94a5\uff0c\u79c1\u94a5\u4e0d\u4f1a\u4e0a\u4f20\u670d\u52a1\u5668\uff0c\u4e5f\u4e0d\u4f1a\u4fdd\u5b58\u5728\u672c\u5730\uff0c\u4ec5\u4f9b\u65b9\u4fbf\u7528\u6237\u6d4b\u8bd5\u4e4b\u7528\uff0c\u4e0d\u9002\u5408\u5b58\u653e\u5927\u91cf\u8d44\u91d1\uff0c\u5efa\u8bae\u7528\u6237\u59a5\u5584\u4fdd\u7ba1\u90ae\u7bb1+\u5bc6\u7801\u7ec4\u5408\u4ee5\u9632\u8d44\u91d1\u4e22\u5931\u3002"}),Object(ne.jsx)(x.a.Item,{children:Object(ne.jsx)(l.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"})})]})})}function be(e){var a=e.onWithDraw,t=e.onTransfer,c=E("key"),n=Object(o.a)(c,1)[0],r=E("account"),s=Object(o.a)(r,1)[0],d=E("bsvBalance"),b=Object(o.a)(d,1)[0],f=E("sensibleFtList"),i=Object(o.a)(f,1)[0];if(!n||!s)return null;var p=function(e){return t(e||"")};return[Object(ne.jsx)(j.a,{className:"card",title:"Account Info",bordered:!1,actions:Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(l.a,{type:"link",onClick:function(){var e=Object(C.g)(s.network,n.address);window.open(e)},children:"history"}),",",Object(ne.jsx)(l.a,{type:"link",onClick:a,children:"withdraw"}),","]}),children:Object(ne.jsxs)(x.a,{layout:"vertical",children:[Object(ne.jsxs)(x.a.Item,{label:"".concat(s.network," address"),children:[Object(ne.jsx)(h.a,{value:n.address}),Object(ne.jsx)("div",{style:{margin:20},children:Object(ne.jsx)(K,{value:n.address})})]}),Object(ne.jsx)(x.a.Item,{label:"privateKey",children:Object(ne.jsx)(h.a.Password,{visibilityToggle:!0,value:n.privateKey})})]})}),Object(ne.jsx)(j.a,{className:"card",title:"Asset",bordered:!1,children:Object(ne.jsxs)(x.a,{layout:"vertical",children:[b&&Object(ne.jsx)(x.a.Item,{label:"MVC balance",children:Object(ne.jsxs)(v.a,{justify:"space-between",children:[Object(ne.jsx)(m.a,{span:16,children:Object(ne.jsx)("div",{children:Object(C.b)(b.balance,8)})}),Object(ne.jsx)(m.a,{span:7,children:Object(ne.jsx)(l.a,{type:"link",onClick:function(){return p("")},children:"Transfer MVC"})})]})}),i.length>0&&Object(ne.jsx)(x.a.Item,{label:"Fungible Token",children:Object(ne.jsx)(O.b,{itemLayout:"horizontal",dataSource:i,renderItem:function(e){return Object(ne.jsxs)(O.b.Item,{actions:Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsx)(u.a,{placement:"topRight",content:Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("div",{children:["codehash: ",e.codehash]}),",",Object(ne.jsxs)("div",{children:["genesis: ",e.genesis]}),","]}),children:Object(ne.jsx)("a",{href:Object(C.f)(s.network,n.address,e.genesis,e.codehash),rel:"noreferrer",target:"_blank",children:"more info"},"list-loadmore-more")})}),children:[Object(ne.jsx)(O.b.Item.Meta,{title:e.tokenSymbol,description:e.tokenName}),Object(ne.jsxs)(v.a,{children:[Object(ne.jsx)(m.a,{children:Object(ne.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center"},children:["Balance:"," ",Object(C.b)(e.balance,e.tokenDecimal)]})}),Object(ne.jsx)(m.a,{children:Object(ne.jsx)(l.a,{type:"link",onClick:function(){return p(e.genesis)},children:"Go Transfer"})})]})]},e.genesis)}})})]})})]}function fe(e){return ce.a.get(e)}function oe(){return ie.apply(this,arguments)}function ie(){return ie=Object(f.a)(Object(b.a)().mark((function e(){var a,t,c,n=arguments;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:[],t=[],c=[],a.forEach((function(e){t.push(fe(e))})),e.abrupt("return",new Promise((function(e){ce.a.all(t).then((function(t){t.forEach((function(e,t){c.push({satotxApiPrefix:a[t],satotxPubKey:e.data.data.pubKey})})),e(c)}))})));case 4:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function ue(e){var a=e.initDatas,t=void 0===a?[]:a,n=e.onCancel,r=e.onTransferCallback,s=E("key"),i=Object(o.a)(s,1)[0],u=E("bsvBalance"),O=Object(o.a)(u,1)[0],y=E("account"),S=Object(o.a)(y,1)[0],K=E("sensibleFtList"),B=Object(o.a)(K,1)[0],F=x.a.useForm(),N=Object(o.a)(F,1)[0],L=Object(c.useState)(!1),_=Object(o.a)(L,2),z=_[0],H=_[1];if($((function(){var e={};t.forEach((function(a,t){var c=!a.genesis,n=B.find((function(e){return e.genesis===a.genesis})),r=c?8:n.tokenDecimal;e["receiverList".concat(t)]=a.receivers.map((function(e){return{address:e.address,amount:ee.b(e.amount,ee.c(r))}}))})),N.setFieldsValue(e)}),i&&O),!i)return null;if(!O)return null;var R=function(){var e=Object(f.a)(Object(b.a)().mark((function e(){var a,c,n,s;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=N.getFieldsValue(),c=function(){var e=Object(f.a)(Object(b.a)().mark((function e(a){var t,c,n,s,d,f,o;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.formatReceiverList,c=a.noBroadcast,H(!0),s="",e.prev=3,!0!==c){e.next=12;break}return!0,e.next=8,Object(C.l)(S.network,i.privateKey,t,c,true);case 8:return e.next=10,e.sent;case 10:return d=e.sent,e.abrupt("return",d);case 12:return e.next=14,Object(C.l)(S.network,i.privateKey,t);case 14:return e.next=16,e.sent;case 16:f=e.sent,n=f,s=f.txid,e.next=30;break;case 21:e.prev=21,e.t0=e.catch(3),o="broadcast error: "+e.t0.toString(),ae.a(e.t0),ae.b("bsvTransferFail_".concat(i.address)),r({error:o}),console.log("broadcast mvc error "),console.error(e.t0),g.b.error(e.t0.toString());case 30:return ae.b("bsvTransferSuccess_".concat(i.address,"_").concat(s)),e.abrupt("return",n);case 32:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(a){return e.apply(this,arguments)}}(),n=function(){var e=Object(f.a)(Object(b.a)().mark((function e(a){var t,c,n,s,d,f,o,u;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.formatReceiverList,c=a.token,a.decimal,a.genesis,n=a.rabinApis,s=a.utxos,d=a.noBroadcast,H(!0),e.prev=2,e.next=5,oe(n);case 5:return o=e.sent,e.next=8,Object(C.m)(S.network,o,i.privateKey,t,c.codehash,c.genesis,s,d||!1);case 8:u=e.sent,f=u,e.next=20;break;case 12:e.prev=12,e.t0=e.catch(2),ae.a(e.t0),ae.b("ftTransferFail_".concat(i.address,"_").concat(c.genesis,"_").concat(c.genesis)),r({error:"broadcast sensible ft error, "+e.t0.toString()}),console.log("broadcast sensible ft error "),console.error(e.t0),g.b.error(e.t0.toString());case 20:return e.abrupt("return",f);case 21:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(a){return e.apply(this,arguments)}}(),s=function(){var e=Object(f.a)(Object(b.a)().mark((function e(){var s,f,o,u,l,p,h,x,j,v;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=[],f=[],o=[],u=Object(b.a)().mark((function e(d){var f,u,l,p,h,x,j,v,m,w,k,y,T,I,P,K,C,F,N;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t[d],u=!f.genesis,l=B.find((function(e){return e.genesis===f.genesis})),p=u?8:l.tokenDecimal,h=u?O.balance:l.balance,x=f.rabinApis,j=a["receiverList".concat(d)].reduce((function(e,a){return ee.j(e,a.amount)}),0),v=ee.i(j,ee.c(p)),!ee.f(h,v)){e.next=12;break}return r({error:m="Insufficient ft balance"}),e.abrupt("return",{v:g.b.error(m)});case 12:if(w=f.receivers.map((function(e){return{address:e.address,amount:e.amount}})),!u){e.next=28;break}return e.next=16,c({formatReceiverList:w,noBroadcast:!0});case 16:if(k=e.sent,1===(y=k.outputs.length-1)){e.next=22;break}return r({error:T="Insufficient ft balance"}),e.abrupt("return",{v:g.b.error(T)});case 22:I=k.outputs[y],s.push({tx:k,isBsv:!0,noBroadcast:!!f.noBroadcast}),(o=[]).push({txId:k.id,outputIndex:y,satoshis:I.satoshis,wif:i.privateKey,address:new A.mvc.PrivateKey(i.privateKey,S.network).toAddress(S.network)}),e.next=38;break;case 28:return e.next=30,n({formatReceiverList:w,token:l,decimal:p,genesis:f.genesis,rabinApis:x,utxos:o,noBroadcast:!0});case 30:P=e.sent,K=P.routeCheckTx,C=P.tx,s.push({tx:C,routeCheckTx:K,isBsv:!1,noBroadcast:!!f.noBroadcast}),F=C.outputs.length-1,N=C.outputs[F],(o=[]).push({txId:C.id,outputIndex:F,satoshis:N.satoshis,wif:i.privateKey,address:new A.mvc.PrivateKey(i.privateKey,S.network).toAddress(S.network)});case 38:case"end":return e.stop()}}),e)})),l=0;case 5:if(!(l<t.length)){e.next=13;break}return e.delegateYield(u(l),"t0",7);case 7:if("object"!==typeof(p=e.t0)){e.next=10;break}return e.abrupt("return",p.v);case 10:l++,e.next=5;break;case 13:h=0,x=s;case 14:if(!(h<x.length)){e.next=29;break}if((j=x[h]).noBroadcast){e.next=23;break}if(!j.routeCheckTx){e.next=20;break}return e.next=20,Object(C.a)(S.network,j.routeCheckTx.serialize(!0));case 20:if(!j.tx){e.next=23;break}return e.next=23,Object(C.a)(S.network,j.tx.serialize(!0));case 23:(v={txid:j.tx.hash,outputs:Object(C.j)(S.network,j.tx.serialize(!0)).outputs,fee:j.tx.getFee(),isBsv:j.isBsv,txHex:j.tx.serialize(!0)}).isBsv||(v.routeCheckTxid=j.routeCheckTx.hash,v.routeCheckTxHex=j.routeCheckTx.serialize(!0),v.routeCheckOutputs=Object(C.j)(S.network,j.routeCheckTx.serialize(!0)).outputs),f.push(v);case 26:h++,e.next=14;break;case 29:H(!1),r({response:Object(d.a)({},f)});case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),function(){var e=Object(f.a)(Object(b.a)().mark((function e(){var s,d,f,o,u;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s={},d=[],f=Object(b.a)().mark((function e(f){var o,u,l,p,h,x,j,v,m,w,k,y,T,I,P,K,C,F,N;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t[f],u=!o.genesis,l=B.find((function(e){return e.genesis===o.genesis})),p=u?8:l.tokenDecimal,h=u?O.balance:l.balance,x=o.rabinApis,j=a["receiverList".concat(f)].reduce((function(e,a){return ee.j(e,a.amount)}),0),v=ee.i(j,ee.c(p)),!ee.f(h,v)){e.next=12;break}return r({error:m="Insufficient ft balance"}),e.abrupt("return",{v:g.b.error(m)});case 12:if(w=o.receivers.map((function(e){return{address:e.address,amount:e.amount}})),!u){e.next=28;break}return e.next=16,c({formatReceiverList:w,noBroadcast:!0});case 16:if(k=e.sent,1===(y=k.outputs.length-1)){e.next=22;break}return r({error:T="Insufficient ft balance"}),e.abrupt("return",{v:g.b.error(T)});case 22:I=k.outputs[y],s.bsvRawTx=k.toString(),(d=[]).push({txId:k.id,outputIndex:y,satoshis:I.satoshis,wif:i.privateKey,address:new A.mvc.PrivateKey(i.privateKey,S.network).toAddress(S.network)}),e.next=39;break;case 28:return e.next=30,n({formatReceiverList:w,token:l,decimal:p,genesis:o.genesis,rabinApis:x,utxos:d,noBroadcast:!0});case 30:P=e.sent,K=P.amountCheckTx,C=P.tx,s.amountCheckRawTx=K.toString(),s.tokenRawTx=C.toString(),F=C.outputs.length-1,N=C.outputs[F],(d=[]).push({txId:C.id,outputIndex:F,satoshis:N.satoshis,wif:i.privateKey,address:new A.mvc.PrivateKey(i.privateKey,S.network).toAddress(S.network)});case 39:case"end":return e.stop()}}),e)})),o=0;case 4:if(!(o<t.length)){e.next=12;break}return e.delegateYield(f(o),"t0",6);case 6:if("object"!==typeof(u=e.t0)){e.next=9;break}return e.abrupt("return",u.v);case 9:o++,e.next=4;break;case 12:H(!1),r({response:s});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p.a.confirm({title:"Confirm the transaction",onOk:function(){s()}});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ne.jsx)(j.a,{className:"card",title:Object(ne.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){n()},children:[Object(ne.jsx)(T.a,{}),"Transfer"]}),loading:z,bordered:!1,children:Object(ne.jsxs)(x.a,{form:N,layout:"vertical",onFinish:R,children:[t.map((function(e,a){var t=!e.genesis,c=B.find((function(a){return a.genesis===e.genesis}));if(!t&&!c)return null;var n=t?"MVC":c.tokenSymbol,r=t?8:c.tokenDecimal,s=t?O.balance:c.balance,b=Object(C.b)(s,r),f=!(e.receivers.length>0);return Object(ne.jsxs)("div",{children:[Object(ne.jsx)("div",{className:"transfer-line",children:t?"Coin: ".concat(n):"Token: ".concat(n)}),!t&&Object(ne.jsxs)("div",{className:"transfer-line",children:["Genesis: ",c.genesis]}),!t&&Object(ne.jsxs)("div",{className:"transfer-line",children:["Codehash: ",c.codehash]}),Object(ne.jsx)(v.a,{justify:"space-between",style:{margin:"10px 0"},children:Object(ne.jsx)(m.a,{span:14,children:Object(ne.jsx)("div",{style:{fontWeight:700},children:"Input"})})}),Object(ne.jsx)("div",{className:"transfer-line",children:"Balance: ".concat(b)}),Object(ne.jsx)("div",{className:"transfer-line",children:"From Address: ".concat(i.address)}),Object(ne.jsx)(v.a,{justify:"space-between",style:{margin:"10px 0"},children:Object(ne.jsx)(m.a,{span:14,children:Object(ne.jsx)("div",{style:{fontWeight:700},children:"Output"})})}),Object(ne.jsx)(x.a.List,{name:"receiverList".concat(a),children:function(e,a){var t=a.add,c=a.remove;return Object(ne.jsxs)(ne.Fragment,{children:[e.map((function(e,a,t){for(var n=arguments.length,r=new Array(n>3?n-3:0),s=3;s<n;s++)r[s-3]=arguments[s];return Object(ne.jsxs)(w.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(ne.jsx)(x.a.Item,Object(d.a)(Object(d.a)({},r),{},{name:[a,"address"],fieldKey:[t,"address"],rules:[{required:!0,message:"Please input the address"},{message:"invalid address",validator:function(e,a){return Object(C.i)(S.network,a)?Promise.resolve():Promise.reject()}}],children:Object(ne.jsx)(h.a,{placeholder:"Input the address",disabled:!f})})),Object(ne.jsx)(x.a.Item,Object(d.a)(Object(d.a)({},r),{},{name:[a,"amount"],fieldKey:[t,"amount"],rules:[{required:!0,message:"Please input amount"}],children:Object(ne.jsx)(k.a,{placeholder:"Amount",min:0,disabled:!f})})),Object(ne.jsx)(l.a,{disabled:!f,size:"small",onClick:function(){return c(a)},shape:"circle",icon:Object(ne.jsx)(I.a,{})})]},e.fieldKey)})),Object(ne.jsx)(x.a.Item,{children:Object(ne.jsx)(l.a,{type:"dashed",onClick:function(){return t()},icon:Object(ne.jsx)(P.a,{}),disabled:!f,children:"Add Output"})})]})}})]},a)})),Object(ne.jsx)(x.a.Item,{children:Object(ne.jsx)(l.a,{type:"primary",htmlType:"submit",block:!0,children:"Transfer"})})]})})}function le(e){var a=e.genesis,t=void 0===a?"":a,n=e.initReceivers,r=void 0===n?[]:n,s=e.rabinApis,i=void 0===s?[]:s,u=e.onCancel,O=e.onTransferCallback,y=e.noBroadcast,S=E("key"),K=Object(o.a)(S,1)[0],A=E("bsvBalance"),B=Object(o.a)(A,1)[0],F=E("account"),N=Object(o.a)(F,1)[0],L=E("sensibleFtList"),_=Object(o.a)(L,1)[0],z=x.a.useForm(),H=Object(o.a)(z,1)[0],R=Object(c.useState)(!1),q=Object(o.a)(R,2),D=q[0],M=q[1],W=!(r.length>0);if($((function(){var e=""===t,a=_.find((function(e){return e.genesis===t})),c=e?8:a.tokenDecimal;console.log("initReceivers",r,r.map((function(e){return{address:e.address,amount:ee.i(e.amount,ee.c(c))}}))),H.setFieldsValue({receiverList:r.map((function(e){return{address:e.address,amount:ee.b(e.amount,ee.c(c))}}))})}),K&&B&&r.length),!K)return null;if(!B)return null;if(t&&!_.length)return null;var J=""===t,V=_.find((function(e){return e.genesis===t}));if(!J&&!V)return null;var G=J?"MVC":V.tokenSymbol,U=J?8:V.tokenDecimal,Y=J?B.balance:V.balance,Z=Object(C.b)(Y,U),Q=function(){var e=Object(f.a)(Object(b.a)().mark((function e(){var a,t,c,n,r,s,o,u;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=H.getFieldsValue(),t=a.receiverList,c=t.reduce((function(e,a){return ee.j(e,a.amount)}),0),n=ee.i(c,ee.c(U)),!ee.f(Y,n)){e.next=7;break}return O({error:r="Insufficient ft balance"}),e.abrupt("return",g.b.error(r));case 7:s=t.map((function(e){return{address:e.address,amount:ee.i(e.amount,ee.c(U))}})),o=function(){var e=Object(f.a)(Object(b.a)().mark((function e(){var a,t,c,n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),a="",e.prev=2,e.next=5,Object(C.l)(N.network,K.privateKey,s,y);case 5:c=e.sent,y?(t={txid:c.hash,txHex:c.serialize(!0),outputs:Object(C.j)(N.network,c.serialize(!0)).outputs,fee:c.getFee()},a=c.hash):(t=c,a=c.txid),e.next=19;break;case 9:e.prev=9,e.t0=e.catch(2),n="broadcast error: "+e.t0.toString(),console.log(ee.k({type:"bsvTransferFail",msg:n,account:{network:N.network,address:K.address},receivers:s})),ae.a(e.t0),ae.b("bsvTransferFail_".concat(K.address)),O({error:n}),console.log("broadcast mvc error "),console.error(e.t0),g.b.error(e.t0.toString());case 19:M(!1),a&&(console.log(ee.k(Object(d.a)({type:"bsvTransferSuccess",account:{network:N.network,address:K.address},receivers:s,txid:a},t))),ae.b("bsvTransferSuccess_".concat(K.address,"_").concat(a)),O({response:Object(d.a)({},t)}),p.a.success({title:"Transaction broadcast success",content:Object(ne.jsxs)("div",{children:["txid:"," ",Object(ne.jsx)("a",{target:"_blank",rel:"noreferrer",href:Object(C.h)(N.network,a),children:a})]})}));case 21:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(f.a)(Object(b.a)().mark((function e(){var a,t,c,n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),a="",e.prev=2,e.next=5,oe(i);case 5:return c=e.sent,e.next=8,Object(C.m)(N.network,c,K.privateKey,s,V.codehash,V.genesis,!1,y);case 8:n=e.sent,y?(t={txid:n.tx.hash,outputs:Object(C.j)(N.network,n.tx.serialize(!0)).outputs,fee:n.tx.getFee(),routeCheckTxid:n.routeCheckTx.hash,txHex:n.tx.serialize(!0),routeCheckTxHex:n.routeCheckTx.serialize(!0),routeCheckOutputs:Object(C.j)(N.network,n.routeCheckTx.serialize(!0)).outputs},a=n.tx.hash):(t=n,a=n.txid),e.next=21;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("broadcast sensible ft error "),console.error(e.t0),g.b.error(e.t0.toString()),console.log(ee.k({type:"ftTransferFail",msg:ee.k(e.t0.message),account:{network:N.network,address:K.address},genesis:V.genesis,codehash:V.codehash,receivers:s})),ae.a(e.t0),ae.b("ftTransferFail_".concat(K.address,"_").concat(V.genesis,"_").concat(V.genesis)),O({error:e.t0.toString()});case 21:M(!1),a&&(console.log(ee.k(Object(d.a)({type:"ftTransferSuccess,",account:{network:N.network,address:K.address,genesis:V.genesis,codehash:V.codehash},receivers:s,txid:a},t))),ae.b("ftTransferSuccess_".concat(K.address,"_").concat(a)),O({response:Object(d.a)({},t)}),p.a.success({title:"Transaction broadcast success",content:Object(ne.jsxs)("div",{children:["txid:"," ",Object(ne.jsx)("a",{target:"_blank",rel:"noreferrer",href:Object(C.h)(N.network,a),children:a})]})}));case 23:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),p.a.confirm({title:"Confirm the transaction",onOk:function(){J?o():u()}});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ne.jsx)(j.a,{className:"card",title:Object(ne.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){u()},children:[Object(ne.jsx)(T.a,{}),"Transfer"]}),loading:D,bordered:!1,children:Object(ne.jsxs)(x.a,{form:H,layout:"vertical",onFinish:Q,children:[Object(ne.jsx)("div",{className:"transfer-line",children:J?"Coin: ".concat(G):"Token: ".concat(G)}),!J&&Object(ne.jsxs)("div",{className:"transfer-line",children:["Genesis: ",V.genesis]}),!J&&Object(ne.jsxs)("div",{className:"transfer-line",children:["Codehash: ",V.codehash]}),Object(ne.jsx)(v.a,{justify:"space-between",style:{margin:"10px 0"},children:Object(ne.jsx)(m.a,{span:14,children:Object(ne.jsx)("div",{style:{fontWeight:700},children:"Input"})})}),Object(ne.jsx)("div",{className:"transfer-line",children:"Balance: ".concat(Z)}),Object(ne.jsx)("div",{className:"transfer-line",children:"From Address: ".concat(K.address)}),Object(ne.jsx)(v.a,{justify:"space-between",style:{margin:"10px 0"},children:Object(ne.jsx)(m.a,{span:14,children:Object(ne.jsx)("div",{style:{fontWeight:700},children:"Output"})})}),Object(ne.jsx)(x.a.List,{name:"receiverList",children:function(e,a){var t=a.add,c=a.remove;return Object(ne.jsxs)(ne.Fragment,{children:[e.map((function(e,a,t){for(var n=arguments.length,r=new Array(n>3?n-3:0),s=3;s<n;s++)r[s-3]=arguments[s];return Object(ne.jsxs)(w.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(ne.jsx)(x.a.Item,Object(d.a)(Object(d.a)({},r),{},{name:[a,"address"],fieldKey:[t,"address"],rules:[{required:!0,message:"Please input the address"},{message:"invalid address",validator:function(e,a){return Object(C.i)(N.network,a)?Promise.resolve():Promise.reject()}}],children:Object(ne.jsx)(h.a,{placeholder:"Input the address",disabled:!W})})),Object(ne.jsx)(x.a.Item,Object(d.a)(Object(d.a)({},r),{},{name:[a,"amount"],fieldKey:[t,"amount"],rules:[{required:!0,message:"Please input amount"}],children:Object(ne.jsx)(k.a,{placeholder:"Amount",min:0,disabled:!W})})),Object(ne.jsx)(l.a,{disabled:!W,size:"small",onClick:function(){return c(a)},shape:"circle",icon:Object(ne.jsx)(I.a,{})})]},e.fieldKey)})),Object(ne.jsx)(x.a.Item,{children:Object(ne.jsx)(l.a,{type:"dashed",onClick:function(){return t()},icon:Object(ne.jsx)(P.a,{}),disabled:!W,children:"Add Output"})})]})}}),Object(ne.jsx)(x.a.Item,{children:Object(ne.jsx)(l.a,{type:"primary",htmlType:"submit",block:!0,children:"Transfer"})})]})})}var pe=function(){Object(c.useEffect)((function(){Y(D())}),[]);var e=Object(c.useState)(!1),a=Object(o.a)(e,2),t=a[0],n=a[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),b=s[0],f=s[1],i=E("account"),u=Object(o.a)(i,1)[0],l=E("key"),h=Object(o.a)(l,1)[0],x=E("bsvBalance"),j=Object(o.a)(x,1)[0],v=E("sensibleFtList"),m=Object(o.a)(v,1)[0],O=Object(c.useState)([]),g=Object(o.a)(O,2),w=g[0],k=g[1],y=Object(c.useState)([]),S=Object(o.a)(y,2),T=S[0],I=S[1],P=Object(c.useState)([]),K=Object(o.a)(P,2),A=K[0],C=K[1],F=Object(c.useState)(!1),N=Object(o.a)(F,2),L=N[0],_=N[1],z=function(){n(!1),f("")},H=function(){if(!window.opener)return null;var e=window.location.hash.substr(1);try{var a=JSON.parse(decodeURIComponent(e));if("popup"===a.type&&"object"===typeof a.data)return a}catch(t){}return null},R=function(e){var a=H();a&&B(window.opener,"*").emit(a.id,{type:"response",data:Object(d.a)(Object(d.a)({},a.data.data),e)})},q=(null===h||void 0===h?void 0:h.address)&&(null===u||void 0===u?void 0:u.network),M=q&&j&&ee.e(j.balance,0);return $((function(){var e=H();if(e&&"request"===e.data.type){var a=e.data.data,t=a.method,c=a.params;"requestAccount"===t&&p.a.confirm({title:"Connect",content:Object(ne.jsxs)("div",{children:["Allow ",Object(ne.jsx)("b",{children:c.name})," to connect your web wallet"]}),onOk:function(){R({response:!0})},onCancel:function(){R({error:"user reject"})}})}}),!!q),$((function(){var e=H();if(console.log("mvc hash data",e),e&&"request"===e.data.type){var a=e.data.data,t=a.method,c=a.params;if("transferBsv"===t){var r=c.receivers.reduce((function(e,a){return ee.j(e,a.amount)}),0);ee.d(r,j.balance)?R({error:"insufficient mvc balance"}):(n(!0),k(c.receivers),_(c.noBroadcast))}}}),!!M),$((function(){var e=H();if(console.log("hashdata",e),e&&"request"===e.data.type){var a=e.data.data,t=a.method,c=a.params;if("transferSensibleFt"===t){var r=c.receivers.reduce((function(e,a){return ee.j(e,a.amount)}),0);console.log("outputTotal",r);var s=m.find((function(e){return e.genesis===c.genesis}));console.log("ft",s),s?ee.d(r,s.balance)?R({error:"insufficient ft balance"}):(n(!0),f(c.genesis),k(c.receivers),C(c.rabinApis),_(c.noBroadcast)):R({error:"insufficient ft balance"})}}}),!!M),$((function(){var e=H();if(console.log("mvc hash data",e),e&&"request"===e.data.type){var a=e.data.data,t=a.method,c=a.params;"transferAll"===t&&c.datas.forEach((function(e){var a=!e.genesis,t=m.find((function(a){return a.genesis===e.genesis})),r=e.receivers.reduce((function(e,a){return ee.j(e,a.amount)}),0);a&&ee.d(r,j.balance)?R({error:"insufficient mvc balance"}):t&&ee.d(r,t.balance)?R({error:"insufficient ft balance"}):(n(!0),I(c.datas))}))}}),!!M),Object(c.useEffect)((function(){var e=window.onbeforeunload;window.onbeforeunload=function(a){return R({error:"use closed"}),e&&e(a)}})),Object(ne.jsxs)("div",{className:"App",style:{overflow:"hidden"},children:[Object(ne.jsx)(se,{accountName:"harry"}),Object(ne.jsx)(de,{}),!t&&Object(ne.jsx)(be,{onTransfer:function(e){n(!0),e&&f(e)}}),t&&(!T||T.length<1?Object(ne.jsx)(le,{genesis:b,rabinApis:A,onCancel:z,onTransferCallback:R,initReceivers:w,noBroadcast:L}):Object(ne.jsx)(ue,{onCancel:z,onTransferCallback:R,initDatas:T}))]})},he=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,790)).then((function(a){var t=a.getCLS,c=a.getFID,n=a.getFCP,r=a.getLCP,s=a.getTTFB;t(e),c(e),n(e),r(e),s(e)}))},xe=t(778),je=t(409),ve=(t(129),window===window.top);xe.a({dsn:"https://d223c2a1d1bf44b6a657051ac9a99b16@o877284.ingest.sentry.io/5827823",integrations:[new je.a.BrowserTracing],tracesSampleRate:1}),ve?s.a.render(Object(ne.jsx)(n.a.StrictMode,{children:Object(ne.jsx)(pe,{})}),document.getElementById("root")):function(){X.apply(this,arguments)}(),function(){var e=window.onbeforeunload;window.onbeforeunload=function(a){return!!window.opener||Y(null),e&&e(a)}}(),he()}},[[770,1,2]]]);
//# sourceMappingURL=main.6269e915.chunk.js.map